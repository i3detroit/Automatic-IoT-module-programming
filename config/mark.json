[
    {
        "name": "Basement Light %id%",
        "hass_template": "light",
        "hass_domain": "light",
        "software": "tasmota",
        "site": "mark",
        "module": "SONOFF_BASIC",
        "board": "esp01_1m",
        "base_topic": "mark/basement",
        "topic": "lights/%id%",
        "poweron_state": 1,
        "build_flags": [
                "USE_RULES",
                "SUPPORT_MQTT_EVENT",
                "USE_EXPRESSION"
        ],
        "commands": [
            {
                "command": "backlog",
                "payload": "SetOption56 ON; SetOption57 ON"
            }
        ],
        "instances": [
            {
                "id": "001",
                "ip_addr": "192.168.107.16",
                "group_topic": "lights/b"
            },
            {
                "id": "002",
                "group_topic": "lights/b"
            },
            {
                "id": "003",
                "group_topic": "lights/a"
            },
            {
                "id": "004",
                "group_topic": "lights/b"
            },
            {
                "id": "005",
                "group_topic": "lights/a"
            },
            {
                "id": "006",
                "group_topic": "lights/b"
            },
            {
                "id": "007",
                "group_topic": "lights/laundry"
            },
            {
                "id": "008",
                "group_topic": "lights/a"
            },
            {
                "id": "009",
                "group_topic": "lights/a"
            }
        ]
    },
    {
        "name": "Living Room Lights %id%",
        "hass_template": "light",
        "hass_domain": "light",
        "software": "tasmota",
        "site": "mark",
        "module": "SONOFF_BASIC",
        "board": "esp01_1m",
        "base_topic": "mark/living-room",
        "topic": "lights/%id%",
        "group_topic": "NOT_A_TOPIC",
        "poweron_state": 1,
        "build_flags": [
                "USE_RULES",
                "SUPPORT_MQTT_EVENT",
                "USE_EXPRESSION"
        ],
        "commands": [
            {
                "command": "backlog",
                "payload": "SetOption56 ON; SetOption57 ON"
            }
        ],
        "instances": [
            {
                "id": "main"
            }
        ]
    },
    {
        "name": "Thermostat",
        "domain": null,
        "software": "custom-mqtt-programs",
        "site": "mark",
        "module": "thermostat",
        "board": "d1_mini",
        "ip_addr": "192.168.107.12",
        "group_topic": "none",
        "base_topic": "mark",
        "topic": "thermostat",
        "build_flags": "",
        "commands": null
    },
    {
        "name": "Sensor Cluster %id%",
        "hass_template": "sensor_cluster",
        "hass_domain": "sensor",
        "software": "tasmota",
        "site": "mark",
        "module": "WEMOS",
        "board": "esp01_1m",
        "group_topic": "none",
        "base_topic": "mark",
        "topic": "sensors/cluster-%id%",
        "group_topic": "sensors",
        "poweron_state": 1,
        "build_flags": [
            "USE_I2C",
            "USE_BMP",
            "USE_BH1750",
            "USE_RULES",
            "SUPPORT_MQTT_EVENT",
            "USE_EXPRESSION"
        ],
        "commands": [
            {
                "command": "backlog",
                "payload": "SetOption56 ON; SetOption57 ON; GPIO4 6; GPIO5 5; teleperiod 60",
                "restart": 1
            }
        ],
        "instances": [
            {
                "id": "basement-east"
            },
            {
                "id": "basement-west"
            }
        ]
    },
    {
        "name": "Basement Light Switch",
        "hass_template": "generic",
        "hass_domain": "sensor",
        "software": "tasmota",
        "site": "mark",
        "module": "WEMOS",
        "board": "esp01_1m",
        "poweron_state": 0,
        "group_topic": "none",
        "base_topic": "mark/basement",
        "topic": "lightswitch",
        "build_flags": [
                "USE_RULES",
                "SUPPORT_MQTT_EVENT",
                "USE_EXPRESSION"
        ],
        "notes": "gpio2(D4): switch1 all off; gpio4(D2): switch 2 a on; gpio5(D1): switch3 a&b on, gpio12(D6): switch4 laundry off; gpio13(D6): Switch6 laundry on",
        "commands": [
            {
                "command": "backlog",
                "payload": "GPIO2 9; GPIO4 10; GPIO5 11; GPIO12 12; GPIO13 13; switchmode1 3; switchmode2 3; switchmode3 3; switchmode4 3; switchmode4 5; switchmode5 5; restart 1",
                "restart": 1
            },
            {
                "command": "rule1",
                "concat": [
                    "ON switch1#state DO Backlog publish cmnd/mark/basement/lights/a/power 0; publish cmnd/mark/basement/lights/b/power 0 ENDON",
                    "ON switch2#state DO publish cmnd/mark/basement/lights/a/power 1 ENDON",
                    "ON switch3#state DO Backlog publish cmnd/mark/basement/lights/a/power 1; publish cmnd/mark/basement/lights/b/power 1 ENDON",
                    "ON switch4#state DO publish cmnd/mark/basement/lights/laundry/power 0 ENDON",
                    "ON switch5#state DO publish cmnd/mark/basement/lights/laundry/power 1 ENDON"
                ]
            },
            {
                "command": "rule1",
                "payload": "1"
            }
        ]
    }
]
